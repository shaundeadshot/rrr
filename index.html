<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ramadan Mubarak</title>
  <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;700&family=Cinzel+Decorative:wght@700;900&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --sky-deep: #0a0415;
      --sky-mid: #0e0a2a;
      --sky-horizon: #1a0d3b;
      --gold: #f5c842;
      --gold-light: #ffe98a;
      --cream: #fff8e7;
      --moon-glow: rgba(255, 240, 160, 0.18);
    }

    body {
      width: 100vw; height: 100vh;
      overflow: hidden;
      font-family: 'Cinzel Decorative', serif;
      background: var(--sky-deep);
    }

    /* â”€â”€ SKY â”€â”€ */
    #sky {
      position: absolute; inset: 0;
      background: linear-gradient(180deg, #04010f 0%, #0d0825 35%, #1a113a 65%, #22143f 100%);
    }

    /* Stars */
    .star {
      position: absolute;
      background: #fff;
      border-radius: 50%;
      animation: twinkle var(--t, 3s) ease-in-out infinite alternate;
      opacity: 0.7;
    }
    @keyframes twinkle {
      from { opacity: 0.2; transform: scale(0.7); }
      to   { opacity: 1;   transform: scale(1.2); }
    }

    /* â”€â”€ GROUND â”€â”€ */
    #ground {
      position: absolute;
      bottom: 0; left: 0; right: 0;
      height: 22%;
      background: linear-gradient(180deg, #0e0620 0%, #160b2e 60%, #1e1040 100%);
      border-top: 2px solid #2d1a55;
    }

    /* â”€â”€ MOSQUE â”€â”€ */
    #mosque-wrap {
      position: absolute;
      bottom: 20%;
      left: 50%;
      transform: translateX(-50%);
      width: min(520px, 90vw);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .mosque-svg {
      width: 100%;
      filter: drop-shadow(0 0 18px #2a0a5e);
    }

    /* â”€â”€ MOON â”€â”€ */
    #moon-wrap {
      position: absolute;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      width: 80px; height: 80px;
      opacity: 0;
      animation: moonRise 2.5s ease-out 1s forwards;
    }
    @keyframes moonRise {
      0%   { opacity: 0; transform: translateX(-50%) translateY(60px) scale(0.5); }
      60%  { opacity: 1; transform: translateX(-50%) translateY(-10px) scale(1.05); }
      100% { opacity: 1; transform: translateX(-50%) translateY(0px)   scale(1); }
    }

    .moon-circle {
      width: 80px; height: 80px;
      border-radius: 50%;
      background: radial-gradient(circle at 38% 32%, #ffffff 0%, #fffde0 30%, #fff5a0 60%, #f5e060 100%);
      box-shadow:
        0 0 30px 10px rgba(255,245,180,0.6),
        0 0 70px 30px rgba(245,220,100,0.3),
        0 0 120px 60px rgba(245,200,66,0.12);
      animation: moonGlow 2s ease-in-out infinite alternate;
    }
    @keyframes moonGlow {
      from { box-shadow: 0 0 30px 10px rgba(255,245,180,.6), 0 0 70px 30px rgba(245,220,100,.3), 0 0 120px 60px rgba(245,200,66,.12); }
      to   { box-shadow: 0 0 50px 20px rgba(255,250,200,.75), 0 0 100px 50px rgba(255,235,120,.4), 0 0 180px 90px rgba(245,200,66,.18); }
    }

    /* â”€â”€ MOONBEAM â”€â”€ */
    #moonbeam {
      position: absolute;
      top: 18%;
      left: 50%;
      transform: translateX(-50%);
      width: 6px;
      height: 0;
      background: linear-gradient(180deg, rgba(255,240,120,0.85) 0%, rgba(255,240,120,0.15) 80%, transparent 100%);
      border-radius: 4px;
      filter: blur(4px);
      opacity: 0;
      animation: beamGrow 2s ease-out 3.5s forwards;
    }
    @keyframes beamGrow {
      0%   { height: 0;    opacity: 0; }
      20%  { opacity: 0.9; }
      100% { height: 55vh; opacity: 0.55; }
    }

    /* Wider ambient glow from moon */
    #moonhalo {
      position: absolute;
      top: 6%;
      left: 50%;
      transform: translateX(-50%);
      width: 300px; height: 300px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(245,200,66,0.14) 0%, transparent 70%);
      opacity: 0;
      animation: haloAppear 2s ease-out 3.2s forwards;
    }
    @keyframes haloAppear {
      from { opacity: 0; transform: translateX(-50%) scale(0.4); }
      to   { opacity: 1; transform: translateX(-50%) scale(1); }
    }

    /* â”€â”€ PEOPLE (scene layer) â”€â”€ */
    #people-layer {
      position: absolute;
      bottom: 20%;
      left: 0; right: 0;
      height: 110px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 0;
    }

    /* Individual person SVG */
    .person {
      width: 34px;
      flex-shrink: 0;
      transform-origin: bottom center;
      opacity: 0;
      animation: personAppear 0.6s ease-out var(--pa, 0.5s) forwards;
    }
    @keyframes personAppear {
      from { opacity: 0; transform: translateY(20px) scale(0.85); }
      to   { opacity: 1; transform: translateY(0)    scale(1); }
    }

    /* Jump animation triggers after message appears */
    .person.jump {
      animation: personAppear 0.6s ease-out var(--pa, 0.5s) forwards,
                 jumpJoy 0.55s ease-in-out var(--jd, 7s) infinite;
    }
    @keyframes jumpJoy {
      0%,100% { transform: translateY(0) scaleX(1); }
      30%     { transform: translateY(-22px) scaleX(0.95) rotate(-4deg); }
      60%     { transform: translateY(-18px) scaleX(1.05) rotate(3deg); }
    }

    /* â”€â”€ RAMADAN MESSAGE â”€â”€ */
    #message-wrap {
      position: absolute;
      top: 28%;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      pointer-events: none;
      opacity: 0;
      animation: messageReveal 1.2s cubic-bezier(0.22,1,0.36,1) 5.5s forwards;
    }
    @keyframes messageReveal {
      0%   { opacity: 0; transform: translateX(-50%) scale(0.4) rotate(-6deg); }
      50%  { opacity: 1; transform: translateX(-50%) scale(1.08) rotate(1deg); }
      100% { opacity: 1; transform: translateX(-50%) scale(1) rotate(0deg); }
    }

    #message-wrap .arabic {
      font-family: 'Scheherazade New', serif;
      font-size: clamp(28px, 6vw, 56px);
      color: var(--gold-light);
      letter-spacing: 4px;
      text-shadow:
        0 0 20px rgba(255,220,80,0.9),
        0 0 60px rgba(255,180,40,0.6),
        0 2px 4px rgba(0,0,0,0.8);
      display: block;
      margin-bottom: 4px;
    }

    #message-wrap .main-title {
      font-family: 'Cinzel Decorative', serif;
      font-size: clamp(30px, 7vw, 72px);
      font-weight: 900;
      background: linear-gradient(135deg, #ffe98a, #f5c842, #d4960a, #ffe98a);
      background-size: 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: none;
      filter: drop-shadow(0 0 18px rgba(245,200,66,0.8));
      animation: shimmer 2s linear 6.5s infinite;
      display: block;
      line-height: 1.15;
    }
    @keyframes shimmer {
      0%   { background-position: 0% center; }
      100% { background-position: 200% center; }
    }

    #message-wrap .subtitle {
      font-family: 'Scheherazade New', serif;
      font-size: clamp(13px, 2.2vw, 20px);
      color: rgba(255,240,180,0.75);
      letter-spacing: 3px;
      display: block;
      margin-top: 8px;
      text-shadow: 0 0 10px rgba(255,200,60,0.4);
      font-style: italic;
    }

    /* Gold ornament lines */
    .ornament {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin: 8px 0;
    }
    .ornament-line {
      height: 1px;
      width: 80px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
    }
    .ornament-diamond {
      width: 7px; height: 7px;
      background: var(--gold);
      transform: rotate(45deg);
      box-shadow: 0 0 8px var(--gold);
    }

    /* glow panel behind message */
    #message-glow {
      position: absolute;
      top: 28%;
      left: 50%;
      transform: translateX(-50%);
      width: 0; height: 0;
      border-radius: 50%;
      background: radial-gradient(ellipse, rgba(100,40,200,0.35) 0%, transparent 70%);
      opacity: 0;
      animation: glowPanel 1s ease-out 5.4s forwards;
    }
    @keyframes glowPanel {
      from { width: 0; height: 0; opacity: 0; }
      to   { width: 90vw; height: 60vh; opacity: 1; }
    }

    /* â”€â”€ FOOD PARTICLES â”€â”€ */
    .food {
      position: absolute;
      font-size: clamp(22px, 3vw, 36px);
      opacity: 0;
      pointer-events: none;
      animation: foodBurst var(--fd, 1.2s) ease-out var(--ft, 6s) forwards;
    }
    @keyframes foodBurst {
      0%   { opacity: 0; transform: translate(0,0) scale(0.3) rotate(0deg); }
      15%  { opacity: 1; }
      80%  { opacity: 0.95; }
      100% { opacity: 0.75;
             transform: translate(var(--fx,0px), var(--fy,0px)) scale(1) rotate(var(--fr,20deg)); }
    }

    /* â”€â”€ FIREWORKS / SPARKLES â”€â”€ */
    .spark {
      position: absolute;
      width: 4px; height: 4px;
      border-radius: 50%;
      background: var(--sc, #f5c842);
      opacity: 0;
      animation: sparkle var(--sd, 1s) ease-out var(--st, 5.5s) forwards;
    }
    @keyframes sparkle {
      0%   { opacity: 1; transform: translate(0,0) scale(1); }
      100% { opacity: 0; transform: translate(var(--sx,0px), var(--sy,0px)) scale(0); }
    }

    /* â”€â”€ LANTERNS â”€â”€ */
    .lantern {
      position: absolute;
      font-size: clamp(28px,4vw,48px);
      opacity: 0;
      animation: lanternFloat 3.5s ease-in-out var(--lt, 4s) infinite;
    }
    @keyframes lanternFloat {
      0%   { opacity: 0; transform: translateY(0) rotate(-5deg); }
      15%  { opacity: 1; }
      50%  { transform: translateY(-30px) rotate(5deg); }
      85%  { opacity: 0.8; }
      100% { opacity: 0; transform: translateY(-80px) rotate(-3deg); }
    }

    /* Scanline overlay for depth */
    #overlay {
      position: absolute; inset: 0;
      background: repeating-linear-gradient(0deg, transparent, transparent 3px, rgba(0,0,0,0.03) 3px, rgba(0,0,0,0.03) 4px);
      pointer-events: none;
    }
  </style>
</head>
<body>

<!-- Sky -->
<div id="sky"></div>

<!-- Moon halo ambient -->
<div id="moonhalo"></div>

<!-- Moon -->
<div id="moon-wrap">
  <div class="moon-circle"></div>
</div>

<!-- Moonbeam -->
<div id="moonbeam"></div>

<!-- Mosque SVG -->
<div id="mosque-wrap">
  <svg class="mosque-svg" viewBox="0 0 520 260" fill="none" xmlns="http://www.w3.org/2000/svg">
    <!-- Main dome -->
    <ellipse cx="260" cy="135" rx="78" ry="75" fill="#1a0d3b"/>
    <path d="M182 135 Q182 60 260 55 Q338 60 338 135Z" fill="#1e1145"/>
    <!-- Dome ridge -->
    <path d="M182 135 Q182 60 260 55 Q338 60 338 135" stroke="#3a246a" stroke-width="1.5" fill="none"/>
    <!-- Dome top finial -->
    <rect x="256" y="44" width="8" height="20" rx="2" fill="#2d1a55"/>
    <circle cx="260" cy="42" r="5" fill="#f5c842"/>
    <circle cx="260" cy="42" r="3" fill="#ffe98a"/>

    <!-- Main building body -->
    <rect x="145" y="135" width="230" height="95" rx="3" fill="#160b2e"/>
    <!-- Arch windows main -->
    <path d="M220 230 L220 175 Q220 160 235 160 Q250 160 250 175 L250 230Z" fill="#0e0620"/>
    <path d="M270 230 L270 175 Q270 160 285 160 Q300 160 300 175 L300 230Z" fill="#0e0620"/>
    <!-- Central grand arch entrance -->
    <path d="M243 230 L243 185 Q243 165 260 165 Q277 165 277 185 L277 230Z" fill="#0a0415"/>
    <path d="M243 185 Q243 165 260 165 Q277 165 277 185" stroke="#f5c842" stroke-width="1" fill="none" opacity="0.5"/>
    <!-- Decorative horizontal bands -->
    <rect x="145" y="148" width="230" height="2" fill="#2d1a55"/>
    <rect x="145" y="158" width="230" height="1" fill="#3a246a" opacity="0.5"/>

    <!-- Left minaret -->
    <rect x="145" y="75" width="28" height="155" rx="2" fill="#140930"/>
    <path d="M145 75 Q159 50 173 75Z" fill="#1a0d3b"/>
    <rect x="151" y="44" width="16" height="36" rx="1" fill="#1a0d3b"/>
    <ellipse cx="159" cy="44" rx="9" ry="5" fill="#1e1145"/>
    <circle cx="159" cy="39" r="4" fill="#f5c842"/>
    <circle cx="159" cy="39" r="2.5" fill="#ffe98a"/>
    <!-- Left minaret windows -->
    <path d="M153 120 L153 105 Q153 98 159 98 Q165 98 165 105 L165 120Z" fill="#0a0415"/>
    <path d="M153 160 L153 145 Q153 138 159 138 Q165 138 165 145 L165 160Z" fill="#0a0415"/>

    <!-- Right minaret -->
    <rect x="347" y="75" width="28" height="155" rx="2" fill="#140930"/>
    <path d="M347 75 Q361 50 375 75Z" fill="#1a0d3b"/>
    <rect x="353" y="44" width="16" height="36" rx="1" fill="#1a0d3b"/>
    <ellipse cx="361" cy="44" rx="9" ry="5" fill="#1e1145"/>
    <circle cx="361" cy="39" r="4" fill="#f5c842"/>
    <circle cx="361" cy="39" r="2.5" fill="#ffe98a"/>
    <!-- Right minaret windows -->
    <path d="M353 120 L353 105 Q353 98 361 98 Q367 98 367 105 L367 120Z" fill="#0a0415"/>
    <path d="M353 160 L353 145 Q353 138 361 138 Q367 138 367 145 L367 160Z" fill="#0a0415"/>

    <!-- Side wing left -->
    <rect x="88" y="155" width="60" height="75" rx="2" fill="#120828"/>
    <path d="M88 155 Q118 140 148 155Z" fill="#160b2e"/>
    <circle cx="118" cy="138" r="4" fill="#f5c842"/>
    <!-- Side wing right -->
    <rect x="372" y="155" width="60" height="75" rx="2" fill="#120828"/>
    <path d="M372 155 Q402 140 432 155Z" fill="#160b2e"/>
    <circle cx="402" cy="138" r="4" fill="#f5c842"/>

    <!-- Decorative arched gallery top -->
    <path d="M165 155 Q175 143 185 155" stroke="#2d1a55" stroke-width="1.2" fill="none"/>
    <path d="M185 155 Q195 143 205 155" stroke="#2d1a55" stroke-width="1.2" fill="none"/>
    <path d="M315 155 Q325 143 335 155" stroke="#2d1a55" stroke-width="1.2" fill="none"/>
    <path d="M335 155 Q345 143 355 155" stroke="#2d1a55" stroke-width="1.2" fill="none"/>

    <!-- Light from windows (glow) -->
    <path d="M220 230 L220 175 Q220 160 235 160 Q250 160 250 175 L250 230Z" fill="url(#wglow)" opacity="0.5"/>
    <path d="M270 230 L270 175 Q270 160 285 160 Q300 160 300 175 L300 230Z" fill="url(#wglow)" opacity="0.5"/>

    <defs>
      <radialGradient id="wglow" cx="50%" cy="30%" r="60%">
        <stop offset="0%" stop-color="#f5c842" stop-opacity="0.7"/>
        <stop offset="100%" stop-color="#f5c842" stop-opacity="0"/>
      </radialGradient>
    </defs>

    <!-- Ground reflection / pathway -->
    <ellipse cx="260" cy="235" rx="110" ry="6" fill="#2a1555" opacity="0.4"/>
  </svg>
</div>

<!-- Message glow panel -->
<div id="message-glow"></div>

<!-- Ramadan Message -->
<div id="message-wrap">
  <span class="arabic">Ø±ÙÙ…ÙØ¶ÙØ§Ù† Ù…ÙØ¨ÙØ§Ø±ÙÙƒ</span>
  <div class="ornament">
    <div class="ornament-line"></div>
    <div class="ornament-diamond"></div>
    <div class="ornament-line"></div>
  </div>
  <span class="main-title">Ramadan<br>Mubarak</span>
  <div class="ornament">
    <div class="ornament-line"></div>
    <div class="ornament-diamond"></div>
    <div class="ornament-line"></div>
  </div>
  <span class="subtitle">Assalam Walekum Dear ğŸŒ™</span>
</div>

<!-- People layer -->
<div id="people-layer"></div>

<!-- Ground -->
<div id="ground"></div>

<!-- Scanline -->
<div id="overlay"></div>

<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   STARS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const sky = document.getElementById('sky');
for (let i = 0; i < 180; i++) {
  const s = document.createElement('div');
  s.className = 'star';
  const sz = Math.random() * 2.5 + 0.5;
  s.style.cssText = `
    width:${sz}px; height:${sz}px;
    top:${Math.random()*75}%;
    left:${Math.random()*100}%;
    --t:${(Math.random()*3+1.5).toFixed(1)}s;
    animation-delay:${(Math.random()*4).toFixed(1)}s;
  `;
  sky.appendChild(s);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PEOPLE â€” standing & then jumping
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const peopleLayer = document.getElementById('people-layer');

// SVG person shapes: burqa women, kurta men, children â€” varied sizes
const personTypes = [
  // Man in long kurta
  (col) => `<svg viewBox="0 0 34 105" fill="none">
    <circle cx="17" cy="11" r="8" fill="#f0c8a0"/>
    <rect x="10" y="4" width="14" height="10" rx="7" fill="${col}" opacity="0.6"/>
    <path d="M7 32 Q17 22 27 32 L29 92 H5 Z" fill="${col}"/>
    <line x1="17" y1="28" x2="17" y2="72" stroke="rgba(255,255,255,0.18)" stroke-width="1.5"/>
    <rect x="3" y="32" width="7" height="32" rx="3" fill="${col}" opacity="0.85"/>
    <rect x="24" y="32" width="7" height="32" rx="3" fill="${col}" opacity="0.85"/>
    <rect x="9" y="90" width="7" height="13" rx="3" fill="${col}"/>
    <rect x="18" y="90" width="7" height="13" rx="3" fill="${col}"/>
  </svg>`,
  // Woman in full burqa (niqab style)
  (col) => `<svg viewBox="0 0 34 105" fill="none">
    <ellipse cx="17" cy="11" rx="11" ry="11" fill="${col}"/>
    <rect x="10" y="4" width="14" height="10" rx="2" fill="#222" opacity="0.9"/>
    <ellipse cx="17" cy="8" rx="9" ry="4" fill="${col}"/>
    <path d="M3 30 Q17 18 31 30 L33 100 H1 Z" fill="${col}"/>
    <rect x="9" y="98" width="7" height="7" rx="3" fill="${col}"/>
    <rect x="18" y="98" width="7" height="7" rx="3" fill="${col}"/>
  </svg>`,
  // Child in kurta (small)
  (col) => `<svg viewBox="0 0 26 78" fill="none">
    <circle cx="13" cy="10" r="7" fill="#f0c8a0"/>
    <rect x="8" y="4" width="10" height="8" rx="5" fill="${col}" opacity="0.5"/>
    <path d="M4 24 Q13 17 22 24 L23 68 H3 Z" fill="${col}"/>
    <line x1="13" y1="21" x2="13" y2="55" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
    <rect x="2" y="24" width="5" height="24" rx="2.5" fill="${col}" opacity="0.8"/>
    <rect x="19" y="24" width="5" height="24" rx="2.5" fill="${col}" opacity="0.8"/>
    <rect x="6" y="66" width="5" height="10" rx="2" fill="${col}"/>
    <rect x="13" y="66" width="5" height="10" rx="2" fill="${col}"/>
  </svg>`,
  // Woman in abaya + hijab
  (col) => `<svg viewBox="0 0 34 105" fill="none">
    <circle cx="17" cy="11" r="7" fill="#f0c8a0"/>
    <ellipse cx="17" cy="8" rx="12" ry="10" fill="${col}" opacity="0.95"/>
    <ellipse cx="17" cy="14" rx="10" ry="7" fill="${col}"/>
    <path d="M3 30 Q17 20 31 30 L33 100 H1 Z" fill="${col}"/>
    <rect x="9" y="98" width="7" height="7" rx="3" fill="${col}"/>
    <rect x="18" y="98" width="7" height="7" rx="3" fill="${col}"/>
  </svg>`,
  // Tiny child burqa girl (smallest)
  (col) => `<svg viewBox="0 0 22 66" fill="none">
    <ellipse cx="11" cy="9" rx="8" ry="9" fill="${col}"/>
    <rect x="6" y="4" width="10" height="7" rx="2" fill="#1a1a2e" opacity="0.85"/>
    <path d="M2 24 Q11 15 20 24 L21 60 H1 Z" fill="${col}"/>
    <rect x="5" y="58" width="5" height="8" rx="2" fill="${col}"/>
    <rect x="12" y="58" width="5" height="8" rx="2" fill="${col}"/>
  </svg>`,
];

const palette = ['#1a1a3e','#2c1654','#3b0a45','#0a3d2f','#1a2e5a','#3d1c02','#0d2b4a','#2a0a28','#1c3a1c','#4a1a1a'];
const count = 28;
const jumpDelay = 7.2;

// Size buckets: tall adults, medium adults, small children
const sizeBuckets = [
  { min: 38, max: 46 }, // tall adult
  { min: 28, max: 37 }, // medium adult
  { min: 18, max: 27 }, // child
];

for (let i = 0; i < count; i++) {
  const wrap = document.createElement('div');
  wrap.className = 'person jump';
  const typeIdx = Math.floor(Math.random() * personTypes.length);
  const type = personTypes[typeIdx];
  const color = palette[Math.floor(Math.random() * palette.length)];
  const delay = (0.4 + i * 0.09).toFixed(2);
  const jitter = (jumpDelay + Math.random() * 0.6).toFixed(2);
  // Children (types 2,4) get small bucket, others get tall or medium
  const isChild = typeIdx === 2 || typeIdx === 4;
  const bucket = isChild ? sizeBuckets[2] : (Math.random() > 0.4 ? sizeBuckets[0] : sizeBuckets[1]);
  const w = Math.round(bucket.min + Math.random() * (bucket.max - bucket.min));
  wrap.style.cssText = `
    --pa:${delay}s; --jd:${jitter}s;
    width:${w}px;
    flex-shrink:0;
    align-self:flex-end;
  `;
  wrap.innerHTML = type(color);
  peopleLayer.appendChild(wrap);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   FOOD PARTICLES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const foods = [
  'ğŸŒ™', // crescent
  'ğŸ«–', // tea / atay
  'ğŸ§ƒ', // juice box
  'ğŸµ', // green tea
  'â˜•', // kahwa
  'ğŸ¥›', // milk / lassi
  'ğŸ·', // rose sherbet (glass)
  'ğŸŒ°', // nuts / badam
  'ğŸ«˜', // lentils / dal
  'ğŸ¥˜', // harira soup
  'ğŸ²', // stew
  'ğŸ¥™', // shawarma / wrap
  'ğŸ«“', // flatbread / roti
  'ğŸ¢', // skewer / kebab
  'ğŸ–', // meat / lamb
  'ğŸ«‘', // stuffed pepper
  'ğŸ¥—', // fattoush salad
  'ğŸ¯', // honey
  'ğŸ¥', // croissant / baklava shape
  'ğŸ®', // custard / qatayef
  'ğŸ§†', // falafel
  'ğŸŒ™', // extra moons for Ramadan feel
  'â­', // star
  'ğŸ•Œ', // mosque
];
const foodCount = 55;

for (let i = 0; i < foodCount; i++) {
  const f = document.createElement('div');
  f.className = 'food';
  const emoji = foods[Math.floor(Math.random() * foods.length)];
  const sx = (Math.random()*100).toFixed(1);
  const sy = (Math.random()*100).toFixed(1);
  const tx = ((Math.random()-0.5)*520).toFixed(0);
  const ty = ((Math.random()-0.7)*480).toFixed(0);
  const rot = ((Math.random()-0.5)*360).toFixed(0);
  const dur = (0.9 + Math.random()*1.2).toFixed(2);
  const delay = (6.0 + Math.random()*2.8).toFixed(2);
  const size = (18 + Math.random()*28).toFixed(0);

  f.style.cssText = `
    left:${sx}%; top:${sy}%;
    font-size:${size}px;
    --fx:${tx}px; --fy:${ty}px; --fr:${rot}deg;
    --fd:${dur}s; --ft:${delay}s;
  `;
  f.textContent = emoji;
  document.body.appendChild(f);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SPARKLES / FIREWORKS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const sparkColors = ['#f5c842','#ff9f43','#ff6b9d','#54a0ff','#a29bfe','#ffffff','#ffeaa7'];
const sparkCount = 90;

for (let i = 0; i < sparkCount; i++) {
  const sp = document.createElement('div');
  sp.className = 'spark';
  const sx = (Math.random()*100).toFixed(1);
  const sy = (Math.random()*100).toFixed(1);
  const tx = ((Math.random()-0.5)*250).toFixed(0);
  const ty = ((Math.random()-0.5)*250).toFixed(0);
  const dur = (0.6 + Math.random()*1.2).toFixed(2);
  const delay = (5.4 + Math.random()*3.5).toFixed(2);
  const color = sparkColors[Math.floor(Math.random()*sparkColors.length)];
  const size = (2 + Math.random()*4).toFixed(1);

  sp.style.cssText = `
    left:${sx}%; top:${sy}%;
    width:${size}px; height:${size}px;
    --sc:${color};
    --sx:${tx}px; --sy:${ty}px;
    --sd:${dur}s; --st:${delay}s;
    border-radius:50%;
    box-shadow: 0 0 6px ${color};
  `;
  document.body.appendChild(sp);
}

/* Continuous sparkles after 6s */
function burstSparks() {
  for (let i = 0; i < 6; i++) {
    const sp = document.createElement('div');
    sp.className = 'spark';
    const sx = (20 + Math.random()*60).toFixed(1);
    const sy = (10 + Math.random()*80).toFixed(1);
    const tx = ((Math.random()-0.5)*180).toFixed(0);
    const ty = ((Math.random()-0.5)*180).toFixed(0);
    const color = sparkColors[Math.floor(Math.random()*sparkColors.length)];
    const size = (2 + Math.random()*5).toFixed(1);
    sp.style.cssText = `
      position:absolute;
      left:${sx}%; top:${sy}%;
      width:${size}px; height:${size}px;
      background:${color};
      border-radius:50%;
      box-shadow:0 0 8px ${color};
      animation: sparkle 1s ease-out 0s forwards;
      --sx:${tx}px; --sy:${ty}px;
    `;
    document.body.appendChild(sp);
    setTimeout(() => sp.remove(), 1100);
  }
}
setTimeout(() => setInterval(burstSparks, 160), 6000);

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   LANTERNS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const lanternEmojis = ['ğŸ®','ğŸª”'];
for (let i = 0; i < 14; i++) {
  const l = document.createElement('div');
  l.className = 'lantern';
  const lx = (5 + Math.random()*90).toFixed(1);
  const lt = (4.5 + Math.random()*5).toFixed(2);
  l.style.cssText = `
    left:${lx}%; bottom:${(18+Math.random()*30).toFixed(1)}%;
    font-size:${(24+Math.random()*20).toFixed(0)}px;
    --lt:${lt}s;
  `;
  l.textContent = lanternEmojis[Math.floor(Math.random()*2)];
  document.body.appendChild(l);
}

/* re-spawn lanterns continuously */
function spawnLantern() {
  const l = document.createElement('div');
  l.className = 'lantern';
  l.style.cssText = `
    position:absolute;
    left:${(5+Math.random()*90).toFixed(1)}%;
    bottom:${(16+Math.random()*28).toFixed(1)}%;
    font-size:${(22+Math.random()*22).toFixed(0)}px;
    opacity:0;
    animation: lanternFloat 3.5s ease-in-out 0s 1 forwards;
  `;
  l.textContent = lanternEmojis[Math.floor(Math.random()*2)];
  document.body.appendChild(l);
  setTimeout(() => l.remove(), 3700);
}
setTimeout(() => setInterval(spawnLantern, 600), 5000);

/* Repeat food forever */
function spawnFood() {
  const f = document.createElement('div');
  f.className = 'food';
  const emoji = foods[Math.floor(Math.random()*foods.length)];
  const sx = (Math.random()*100).toFixed(1);
  const sy = (40+Math.random()*55).toFixed(1);
  const tx = ((Math.random()-0.5)*380).toFixed(0);
  const ty = ((Math.random()-0.6)*380).toFixed(0);
  const rot = ((Math.random()-0.5)*360).toFixed(0);
  const size = (16+Math.random()*26).toFixed(0);
  f.style.cssText = `
    position:absolute;
    left:${sx}%; top:${sy}%;
    font-size:${size}px;
    animation: foodBurst 1.3s ease-out 0s forwards;
    --fx:${tx}px; --fy:${ty}px; --fr:${rot}deg;
    opacity:0;
  `;
  f.textContent = emoji;
  document.body.appendChild(f);
  setTimeout(() => f.remove(), 1500);
}
setTimeout(() => setInterval(spawnFood, 120), 6800);
</script>
</body>
</html>
